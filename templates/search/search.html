{% extends 'base.html' %}

{% block content %}

	<form method="get" action="{% url haystack_search %}">
		<input type="text" name="q" value="{{ query }}" id="id_q" size="30" />
		<input type="submit" value="Search">
	</form>
	
	{% if query %}
		<h3>Search Results for &#8220;{{ query }}&#8221;</h3>
		<ol>
			{% for res in page.object_list %}
				
				{% if res.type == 'resource' %}
					<li>
						<a href="{% url resource_detail res.slug %}">{{ res.title }}</a>
					</li>
				{% endif %}
				
				{% if res.type == 'post' %}
					<li>
						<a href="{% url blogdor_post res.date_published.year res.slug %}">{{ res.title }}</a>
					</li>
				{% endif %}
				
			{% empty %}
				<li>No results found.</li>
			{% endfor %}
		</ol>
		<div class="pagination">
			{% if page.has_previous %}
				<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">previous</a>
			{% endif %}
			<span class="current">Page {{ page.number }} of {{ paginator.num_pages }}.</span>
			{% if page.has_next %}
				<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">next</a>
			{% endif %}
		</div>
	{% else %}
		{# Show some example queries to run, maybe query syntax, something else? #}
	{% endif %}
{% endblock %}